<template>
  <div class="w-full bg-red-700" id="contact">
    <div class="flex flex-wrap text-center text-white">
      <!-- CONTACTS COLUMN -->

      <div class="w-full md:w-1/2 p-5 border-r rounded border-gray-600">
        <div class="mt-6 text-xl font-semibold">CONTACTER NOUS</div>

        <div>
          <div class="w-4/5 mx-auto mt-2 px-6 pt-6 pb-4 rounded">
            <a class="flex mt-5 justify-center" href="#">
              <svg
                class="flex flex-2 justify-end  h-6 w-6 fill-current text-second mr-6 "
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                />
              </svg>
              <span class="flex-2   text-gray-400">+216 55 330 859</span>
            </a>
            <a
              class="flex mt-5 justify-center"
              href="https://www.facebook.com/CRTCLMANOUBA"
            >
              <svg
                class="flex flex-2     h-6 w-6 fill-current text-second mr-6"
                viewBox="0 0 512 512"
              >
                <path
                  d="M455.27,32H56.73A24.74,24.74,0,0,0,32,56.73V455.27A24.74,24.74,0,0,0,56.73,480H256V304H202.45V240H256V189c0-57.86,40.13-89.36,91.82-89.36,24.73,0,51.33,1.86,57.51,2.68v60.43H364.15c-28.12,0-33.48,13.3-33.48,32.9V240h67l-8.75,64H330.67V480h124.6A24.74,24.74,0,0,0,480,455.27V56.73A24.74,24.74,0,0,0,455.27,32Z"
                />
              </svg>
              <span class="flex-2  text-gray-400">CRTCLMANOUBA</span>
            </a>
            <a class="flex mt-5 justify-center" href="#">
              <svg
                fill="none"
                class="flex flex-2  justify-end h-6 w-6 text-second mr-6"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                />
              </svg>
              <span class="flex-2 justify-start text-gray-400"
                >crtclmanouba@gmail.com</span
              >
            </a>
            <a
              class="flex mt-5 justify-center"
              href="https://twitter.com/CRTCLMANOUBA"
            >
              <svg
                class="flex flex-2  justify-end h-6 w-6 fill-current text-second mr-6"
                viewBox="0 0 512 512"
              >
                <path
                  d="M496,109.5a201.8,201.8,0,0,1-56.55,15.3,97.51,97.51,0,0,0,43.33-53.6,197.74,197.74,0,0,1-62.56,23.5A99.14,99.14,0,0,0,348.31,64c-54.42,0-98.46,43.4-98.46,96.9a93.21,93.21,0,0,0,2.54,22.1,280.7,280.7,0,0,1-203-101.3A95.69,95.69,0,0,0,36,130.4C36,164,53.53,193.7,80,211.1A97.5,97.5,0,0,1,35.22,199v1.2c0,47,34,86.1,79,95a100.76,100.76,0,0,1-25.94,3.4,94.38,94.38,0,0,1-18.51-1.8c12.51,38.5,48.92,66.5,92.05,67.3A199.59,199.59,0,0,1,39.5,405.6,203,203,0,0,1,16,404.2,278.68,278.68,0,0,0,166.74,448c181.36,0,280.44-147.7,280.44-275.8,0-4.2-.11-8.4-.31-12.5A198.48,198.48,0,0,0,496,109.5Z"
                />
              </svg>
              <span class="flex-2 justify-start text-gray-400"
                >Tunisian Red Crescent-Manouba</span
              >
            </a>
            <a
              class="flex mt-5 justify-center"
              href="https://www.linkedin.com/in/comit%C3%A9-local-manouba-croissant-rouge-tunisien-0995151b0/"
            >
              <svg
                class="flex flex-2 justify-end h-6 w-6 fill-current text-second mr-6"
                viewBox="0 0 512 512"
              >
                <path
                  d="M444.17,32H70.28C49.85,32,32,46.7,32,66.89V441.61C32,461.91,49.85,480,70.28,480H444.06C464.6,480,480,461.79,480,441.61V66.89C480.12,46.7,464.6,32,444.17,32ZM170.87,405.43H106.69V205.88h64.18ZM141,175.54h-.46c-20.54,0-33.84-15.29-33.84-34.43,0-19.49,13.65-34.42,34.65-34.42s33.85,14.82,34.31,34.42C175.65,160.25,162.35,175.54,141,175.54ZM405.43,405.43H341.25V296.32c0-26.14-9.34-44-32.56-44-17.74,0-28.24,12-32.91,23.69-1.75,4.2-2.22,9.92-2.22,15.76V405.43H209.38V205.88h64.18v27.77c9.34-13.3,23.93-32.44,57.88-32.44,42.13,0,74,27.77,74,87.64Z"
                />
              </svg>
              <span class="flex-2 justify-start text-gray-400"
                >Comité Local Manouba Croissant Rouge Tunisien</span
              >
            </a>
          </div>
        </div>
      </div>

      <!-- FORM COLUMN -->

      <div class="w-full md:w-1/2 p-5">
        <div class="mt-6 text-xl font-semibold">ENVOYER UN MESSAGE</div>
        <form class="w-4/5 mx-auto mt-2 px-6 pt-6 pb-4 rounded">
          <div class="flex items-center mb-4">
            <input
              class="w-full input"
              type="text"
              placeholder="Destinataire"
              v-model="email"
            /><br />
          </div>
          <span class="text-gray-400 w-full" v-if="erreur.email"
            >Ce champ ne ressemble pas à une adresse e-mail valide</span
          >
          <div class="flex items-center mb-4">
            <input
              class="w-full input"
              type="text"
              placeholder="Objet"
              v-model="objet"
            />
          </div>
          <span v-if="erreur.objet" class="text-gray-400 w-full"
            >Ce champ est obligatoire</span
          >
          <div class="mb-6">
            <textarea
              class="w-full input"
              placeholder="Message"
              v-model="msg"
            ></textarea>
            <span v-if="erreur.msg" class="text-gray-400 w-full"
              >Ce champ est obligatoire</span
            >
          </div>
          <div class="flex justify-between items-center">
            <button class="w-full btn btn-second " @click.prevent="envoyer">
              Envoyer
            </button>
          </div>
        </form>
      </div>
    </div>
    <div
      class="absolute h-screen w-screen top-0 flex items-center justify-center"
      v-if="NotifSucc"
    >
      <div
        class="fixed h-full w-full bg-gray-600 opacity-25"
        @click="closeSuccess()"
      ></div>
      <div class="flex bg-green-200 max-w-sm mb-4">
        <div class="w-16 bg-green-600">
          <div class="p-4">
            <svg
              class="h-8 w-8 text-white fill-current"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 512 512"
              @click="closeSuccess()"
            >
              <path
                d="M468.907 214.604c-11.423 0-20.682 9.26-20.682 20.682v20.831c-.031 54.338-21.221 105.412-59.666 143.812-38.417 38.372-89.467 59.5-143.761 59.5h-.12C132.506 459.365 41.3 368.056 41.364 255.883c.031-54.337 21.221-105.411 59.667-143.813 38.417-38.372 89.468-59.5 143.761-59.5h.12c28.672.016 56.49 5.942 82.68 17.611 10.436 4.65 22.659-.041 27.309-10.474 4.648-10.433-.04-22.659-10.474-27.309-31.516-14.043-64.989-21.173-99.492-21.192h-.144c-65.329 0-126.767 25.428-172.993 71.6C25.536 129.014.038 190.473 0 255.861c-.037 65.386 25.389 126.874 71.599 173.136 46.21 46.262 107.668 71.76 173.055 71.798h.144c65.329 0 126.767-25.427 172.993-71.6 46.262-46.209 71.76-107.668 71.798-173.066v-20.842c0-11.423-9.259-20.683-20.682-20.683z"
              />
              <path
                d="M505.942 39.803c-8.077-8.076-21.172-8.076-29.249 0L244.794 271.701l-52.609-52.609c-8.076-8.077-21.172-8.077-29.248 0-8.077 8.077-8.077 21.172 0 29.249l67.234 67.234a20.616 20.616 0 0 0 14.625 6.058 20.618 20.618 0 0 0 14.625-6.058L505.942 69.052c8.077-8.077 8.077-21.172 0-29.249z"
              />
            </svg>
          </div>
        </div>
        <div class="w-auto text-grey-700 items-center p-4">
          <span class="text-lg font-bold pb-4">
            Notification
          </span>
          <p class="leading-tight">
            E-mail envoyée
          </p>
        </div>
      </div>
    </div>
    <div
      class="absolute h-screen w-screen top-0 flex items-center justify-center"
      v-if="NotifFaild"
    >
      <div
        class="fixed h-full w-full bg-gray-600 opacity-25"
        @click="closeFaild()"
      ></div>
      <div class="flex bg-red-200 max-w-sm mb-4">
        <div class="w-16 bg-red-600">
          <div class="p-4">
            <svg
              class="h-8 w-8 text-white fill-current"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 512 512"
              @click="closeFaild()"
            >
              <path
                d="M437.019 74.981C388.667 26.629 324.38 0 256 0S123.333 26.63 74.981 74.981 0 187.62 0 256s26.629 132.667 74.981 181.019C123.332 485.371 187.62 512 256 512s132.667-26.629 181.019-74.981C485.371 388.667 512 324.38 512 256s-26.629-132.668-74.981-181.019zM256 470.636C137.65 470.636 41.364 374.35 41.364 256S137.65 41.364 256 41.364 470.636 137.65 470.636 256 374.35 470.636 256 470.636z"
                fill="#FFF"
              />
              <path
                d="M341.22 170.781c-8.077-8.077-21.172-8.077-29.249 0L170.78 311.971c-8.077 8.077-8.077 21.172 0 29.249 4.038 4.039 9.332 6.058 14.625 6.058s10.587-2.019 14.625-6.058l141.19-141.191c8.076-8.076 8.076-21.171 0-29.248z"
                fill="#FFF"
              />
              <path
                d="M341.22 311.971l-141.191-141.19c-8.076-8.077-21.172-8.077-29.248 0-8.077 8.076-8.077 21.171 0 29.248l141.19 141.191a20.616 20.616 0 0 0 14.625 6.058 20.618 20.618 0 0 0 14.625-6.058c8.075-8.077 8.075-21.172-.001-29.249z"
                fill="#FFF"
              />
            </svg>
          </div>
        </div>
        <div class="w-auto text-black opacity-75 items-center p-4">
          <span class="text-lg font-bold pb-4">
            Notification
          </span>
          <p class="leading-tight">
            Erreur d'envoi de l'e-mail .<br />
            Vérifier les champs.
          </p>
        </div>
      </div>
    </div>
  </div>
</template>

<script lang="ts">
import { Component, Vue } from "vue-property-decorator";
@Component
export default class Footerpage extends Vue {
  objet = "";
  msg = "";
  email = "";
  erreur = {
    objet: false,
    msg: false,
    email: false,
  };
  NotifSucc = false;
  NotifFaild = false;
  envoyer() {
    let err = false;
    const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    if (!re.test(this.email)) {
      this.erreur.email = true;
      err = true;
    } else {
      this.erreur.email = false;
    }
    if (this.objet == "") {
      this.erreur.objet = true;
      err = true;
    } else {
      this.erreur.objet = false;
    }
    if (this.msg == "") {
      this.erreur.msg = true;
      err = true;
    } else {
      this.erreur.msg = false;
    }
    if (err) this.NotifFaild = true;
    if (!err) {
      /*try {
        const res = await axios.post("/api/v1/volontaire/add", this.user);
      } catch (err) {
        console.log(err);
      }*/
      this.NotifSucc = true;
    }
  }
  closeFaild() {
    this.NotifFaild = !this.NotifFaild;
  }
  closeSuccess() {
    this.NotifSucc = !this.NotifSucc;
  }
}
</script>
<style></style>
